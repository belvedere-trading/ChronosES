<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ChronosES: Chronos.Core.IndexStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChronosES
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classChronos_1_1Core_1_1IndexStore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classChronos_1_1Core_1_1IndexStore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Chronos.Core.IndexStore Class Reference<div class="ingroups"><a class="el" href="group__Chronos.html">Chronos</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Handles all interaction relating to Chronos indexing functionality.  
 <a href="classChronos_1_1Core_1_1IndexStore.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Chronos.Core.IndexStore:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classChronos_1_1Core_1_1IndexStore.png" usemap="#Chronos.Core.IndexStore_map" alt=""/>
  <map id="Chronos.Core.IndexStore_map" name="Chronos.Core.IndexStore_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:gad4b4a883f7bd0db3b1cf8e6696bcc4e8"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, aggregateClass)</td></tr>
<tr class="separator:gad4b4a883f7bd0db3b1cf8e6696bcc4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ce7cd4a80dd03c4096d995b87341ddc"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>Dispose</b> (self)</td></tr>
<tr class="separator:ga9ce7cd4a80dd03c4096d995b87341ddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf712c2a0ebb64ebf0ec3d7ec07a42a19"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>GetSession</b> (self)</td></tr>
<tr class="separator:gaf712c2a0ebb64ebf0ec3d7ec07a42a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac76ddb048aa12434e964963fe6b08abc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#gac76ddb048aa12434e964963fe6b08abc">GetCheckpoint</a> (self, session)</td></tr>
<tr class="memdesc:gac76ddb048aa12434e964963fe6b08abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current checkpoint information from the SQLite instance.  <a href="group__Chronos.html#gac76ddb048aa12434e964963fe6b08abc">More...</a><br /></td></tr>
<tr class="separator:gac76ddb048aa12434e964963fe6b08abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga999de3bf409634d23dbdce8483f38beb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#ga999de3bf409634d23dbdce8483f38beb">UpdateCheckpoint</a> (self, maxRequestId, session)</td></tr>
<tr class="memdesc:ga999de3bf409634d23dbdce8483f38beb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Persists the provided maxRequestId into the SQLite instance's checkpoint.  <a href="group__Chronos.html#ga999de3bf409634d23dbdce8483f38beb">More...</a><br /></td></tr>
<tr class="separator:ga999de3bf409634d23dbdce8483f38beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadee7d443d8b7f4f600db3e666388bfd2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#gadee7d443d8b7f4f600db3e666388bfd2">ReindexAggregate</a> (self, aggregate, session)</td></tr>
<tr class="memdesc:gadee7d443d8b7f4f600db3e666388bfd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upserts the provided aggregate's information into the underlying sqlite database.  <a href="group__Chronos.html#gadee7d443d8b7f4f600db3e666388bfd2">More...</a><br /></td></tr>
<tr class="separator:gadee7d443d8b7f4f600db3e666388bfd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f3b13bc9ea88c0ff50c1da74c76baa3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#ga3f3b13bc9ea88c0ff50c1da74c76baa3">IndexTag</a> (self, tag, aggregateId, session)</td></tr>
<tr class="memdesc:ga3f3b13bc9ea88c0ff50c1da74c76baa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Persists the provided tag information to the SQLite instance.  <a href="group__Chronos.html#ga3f3b13bc9ea88c0ff50c1da74c76baa3">More...</a><br /></td></tr>
<tr class="separator:ga3f3b13bc9ea88c0ff50c1da74c76baa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ff8f951ec78b029d0cf0fd6e40fadcd"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>GetIndexRow</b> (self, aggregateId)</td></tr>
<tr class="separator:ga9ff8f951ec78b029d0cf0fd6e40fadcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f7d088a9f6b764d14699b9972349342"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>GetTagRow</b> (self, aggregateId, tag)</td></tr>
<tr class="separator:ga7f7d088a9f6b764d14699b9972349342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ad55e4eb49cc32f7e2ff9584041b815"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>GetTagsByAggregateId</b> (self, aggregateId)</td></tr>
<tr class="separator:ga3ad55e4eb49cc32f7e2ff9584041b815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39a553eaf5ed15bde30c2b43f2b563c5"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>GetAllTags</b> (self)</td></tr>
<tr class="separator:ga39a553eaf5ed15bde30c2b43f2b563c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae214bee43e5148b5190c7ba0f6aa63ef"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#gae214bee43e5148b5190c7ba0f6aa63ef">MarkTagsAsArchived</a> (self, tags)</td></tr>
<tr class="memdesc:gae214bee43e5148b5190c7ba0f6aa63ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the provided tags to mark them as archived (no longer available via Redis).  <a href="group__Chronos.html#gae214bee43e5148b5190c7ba0f6aa63ef">More...</a><br /></td></tr>
<tr class="separator:gae214bee43e5148b5190c7ba0f6aa63ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04d2c0aa20ac6cfe356b724e8c62dd8b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#ga04d2c0aa20ac6cfe356b724e8c62dd8b">MarkAsArchived</a> (self, aggregateIds)</td></tr>
<tr class="memdesc:ga04d2c0aa20ac6cfe356b724e8c62dd8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the provided aggregate to mark it as archived.  <a href="group__Chronos.html#ga04d2c0aa20ac6cfe356b724e8c62dd8b">More...</a><br /></td></tr>
<tr class="separator:ga04d2c0aa20ac6cfe356b724e8c62dd8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae824d1e632ce32a311c6a07756f17c28"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#gae824d1e632ce32a311c6a07756f17c28">UpdateMaxArchivedVersion</a> (self, aggregateId, maxVersion)</td></tr>
<tr class="memdesc:gae824d1e632ce32a311c6a07756f17c28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the provided aggregate with its maximum archived version.  <a href="group__Chronos.html#gae824d1e632ce32a311c6a07756f17c28">More...</a><br /></td></tr>
<tr class="separator:gae824d1e632ce32a311c6a07756f17c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga960e19d8f65569f80fd580eebd605031"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#ga960e19d8f65569f80fd580eebd605031">RetrieveAggregateIds</a> (self, isArchived=False, indices)</td></tr>
<tr class="memdesc:ga960e19d8f65569f80fd580eebd605031"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of all aggregateIds that satisfy the provided index properties.  <a href="group__Chronos.html#ga960e19d8f65569f80fd580eebd605031">More...</a><br /></td></tr>
<tr class="separator:ga960e19d8f65569f80fd580eebd605031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e51459a6d624a6abf12d983139e6acd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#ga3e51459a6d624a6abf12d983139e6acd">RetrieveAggregates</a> (self, fromAggregateId, returnCount, isArchived=False, indices)</td></tr>
<tr class="memdesc:ga3e51459a6d624a6abf12d983139e6acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of all aggregates and their index properties that satisfy the provided index properties.  <a href="group__Chronos.html#ga3e51459a6d624a6abf12d983139e6acd">More...</a><br /></td></tr>
<tr class="separator:ga3e51459a6d624a6abf12d983139e6acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ga03ff3b6b6e521bc886259e7b8f390819"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Chronos.html#ga03ff3b6b6e521bc886259e7b8f390819">UpdateIndexSchema</a> (aggregateClass)</td></tr>
<tr class="memdesc:ga03ff3b6b6e521bc886259e7b8f390819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes an external procedure that updates the underlying sqlite database using an on-disk alembic configuration.  <a href="group__Chronos.html#ga03ff3b6b6e521bc886259e7b8f390819">More...</a><br /></td></tr>
<tr class="separator:ga03ff3b6b6e521bc886259e7b8f390819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3530ff791a9e1b25972acfe5fe26c13d"><td class="memItemLeft" align="right" valign="top">
def&#160;</td><td class="memItemRight" valign="bottom"><b>GetIndexStore</b> (aggregateName, eventStore, logicCompiler)</td></tr>
<tr class="separator:ga3530ff791a9e1b25972acfe5fe26c13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ga3ea2eb1863511c1b44135f5d9bc20465"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>aggregateClass</b></td></tr>
<tr class="separator:ga3ea2eb1863511c1b44135f5d9bc20465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae52572b5b7e8ff292504964e99316c87"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>indexClass</b></td></tr>
<tr class="separator:gae52572b5b7e8ff292504964e99316c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga245371a936b284cca0a4a53e5dc6f696"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>tagClass</b></td></tr>
<tr class="separator:ga245371a936b284cca0a4a53e5dc6f696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc7328a5734b8e3047a1a53cda0f41ce"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>checkpointClass</b></td></tr>
<tr class="separator:gabc7328a5734b8e3047a1a53cda0f41ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad477c7768e5bd1f80c9b5d1a5cff484e"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>sqlitePath</b></td></tr>
<tr class="separator:gad477c7768e5bd1f80c9b5d1a5cff484e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad29ca671e4a0cacfe5042a0869518050"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>engine</b></td></tr>
<tr class="separator:gad29ca671e4a0cacfe5042a0869518050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95e7204acdf29be21ebd40bfcc075890"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>readEngine</b></td></tr>
<tr class="separator:ga95e7204acdf29be21ebd40bfcc075890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga798d20ab91e8bf36e291729c4d8cf6c9"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>sessionMaker</b></td></tr>
<tr class="separator:ga798d20ab91e8bf36e291729c4d8cf6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ffcf98b6d9389bec977d0566e538afb"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>readSessionMaker</b></td></tr>
<tr class="separator:ga0ffcf98b6d9389bec977d0566e538afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ga5bbc7c7e4f5743348102221d3b01188e"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>SchemaLock</b> = Lock()</td></tr>
<tr class="separator:ga5bbc7c7e4f5743348102221d3b01188e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadec294ed9eeb0e077c9e5ebaf6a998c0"><td class="memItemLeft" align="right" valign="top">
string&#160;</td><td class="memItemRight" valign="bottom"><b>SQLitePathTemplate</b> = 'sqlite:////var/lib/chronos/index.alembic/db/{0}.sqlite'</td></tr>
<tr class="separator:gadec294ed9eeb0e077c9e5ebaf6a998c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handles all interaction relating to Chronos indexing functionality. </p>
<p>The <a class="el" href="classChronos_1_1Core_1_1IndexStore.html" title="Handles all interaction relating to Chronos indexing functionality. ">IndexStore</a> interfaces with sqlite databases instances that are persisted on disk as part of the Chronos running configuration. In production, these databases (and the entire Chronos running configuration) are persisted on network storage (the Nimble device, currently) in case of individual server failure.</p>
<p>Instances of this class are not thread-safe. </p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>Chronos/Core.py</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Chronos</b></li><li class="navelem"><b>Core</b></li><li class="navelem"><a class="el" href="classChronos_1_1Core_1_1IndexStore.html">IndexStore</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
